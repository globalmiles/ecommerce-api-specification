{
  "info": {
    "name": "Global Miles Ecommerce API",
    "_postman_id": "af2265b7-e9b9-4bd2-8286-f409345fe1b5",
    "description": "API for Ecommerce Partners. This document includes Cart, Discount, Payment, Order and Return related endpoints provided by Global Miles.",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/"
  },
  "item": [
    {
      "name": "Pay with Miles",
      "item": [
        {
          "id": "9a436078-47e3-4926-9738-fa49a8ef13c4",
          "name": "List Mile Payments",
          "request": {
            "url": "http://default/v2/ecommerce/payments?StoreCode=filter%5Bstore_code%5D%3DECO123858493939&FilterByCreatedAt=filter%5Bcreated_at%5D%3D2017-01-01...2018-01-01&FilterByStatus=filter%5Bstatus%5D%3Dcompleted&SortBy=sort%3D-created_at",
            "method": "GET",
            "body": {
              "mode": "raw"
            },
            "description": "This endpoint allows to get list of payments. In order to get detailed payment history and reconciliation you can use this endpoint."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\",\r\n  \"result\": [\r\n    {\r\n      \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\",\r\n      \"created_at\": \"2018-01-01T10:00:00\",\r\n      \"updated_at\": \"2018-01-01T10:10:00\",\r\n      \"status\": \"completed\",\r\n      \"amount\": {\r\n        \"value\": 10.0,\r\n        \"currency\": \"usd\"\r\n      }\r\n    },\r\n    {\r\n      \"payment_provision_token\": \"ppt_0d64fa6f-8871-4a3f-be3b-5a7c97853d10\",\r\n      \"created_at\": \"2017-12-01T23:00:00\",\r\n      \"updated_at\": \"2017-12-02T14:00:00\",\r\n      \"status\": \"refunded\",\r\n      \"amount\": {\r\n        \"value\": 20.0,\r\n        \"currency\": \"usd\"\r\n      }\r\n    },\r\n    {\r\n      \"payment_provision_token\": \"ppt_dadd0d63-dddf-4e82-b483-5c2aca9fb5a5\",\r\n      \"created_at\": \"2017-11-01T12:00:00\",\r\n      \"updated_at\": \"2017-11-01T12:05:00\",\r\n      \"status\": \"cancelled\",\r\n      \"amount\": {\r\n        \"value\": 23.0,\r\n        \"currency\": \"usd\"\r\n      }\r\n    }\r\n  ]\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "aa901434-9e5e-478e-9948-cc1fa2d171f8"
            }
          ]
        },
        {
          "id": "1788d12c-6d5e-4a9d-bf63-66a16fc614a2",
          "name": "Refund Mile Payment",
          "request": {
            "url": "http://default/v2/ecommerce/payments/actions/refund",
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\",\r\n  \"amount\": {\r\n    \"value\": 10.0,\r\n    \"currency\": \"usd\"\r\n  }\r\n}"
            },
            "description": "This endpoint allows to refund a payment."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "b83f0032-845a-4238-b9d5-76ad0e6afb36"
            }
          ]
        },
        {
          "id": "067f2618-1bb3-44f7-affa-66597a76c2ad",
          "name": "Cancel Mile Payment",
          "request": {
            "url": "http://default/v2/ecommerce/payments",
            "method": "DELETE",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\"\r\n}"
            },
            "description": "This endpoint allows to cancel a payment."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "805c7d10-c1dd-4368-8033-ebbd7609bfb6"
            }
          ]
        },
        {
          "id": "59a090b5-bee7-4c29-b2de-9bf371e53ad9",
          "name": "Complete Mile Payment",
          "request": {
            "url": "http://default/v2/ecommerce/payments",
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\"\r\n}"
            },
            "description": "This endpoint allows to complete a payment."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "829b5c64-f0e2-4e77-9ff2-8387adf3020f"
            }
          ]
        },
        {
          "id": "e91667c6-8f93-4a5d-bb3c-0a2efbb88262",
          "name": "Start Mile Payment",
          "request": {
            "url": "http://default/v2/ecommerce/payments",
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"user_token\": \"ut_b69c3393-54eb-471c-907d-8d4ed405f88e\",\r\n  \"amount\": {\r\n    \"value\": 10.0,\r\n    \"currency\": \"usd\"\r\n  }\r\n}"
            },
            "description": "After successful authentication and retrieving needed token, this endpoint allows to start a payment transaction. To be able to complete whole payment process successfully also check \"Complete Mile Payment endpoint\" please."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\",\r\n  \"result\": {\r\n    \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\"\r\n  }\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "1e0104bb-d463-4e03-bca3-30571a041472"
            }
          ]
        }
      ]
    },
    {
      "name": "Earn Miles",
      "item": [
        {
          "id": "426d7a34-fefa-4b5a-b7ad-dce77cbf3a2a",
          "name": "Order Info",
          "request": {
            "url": "http://default/v2/ecommerce/orders",
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"user_token\": \"ut_b69c3393-54eb-471c-907d-8d4ed405f88e\",\r\n  \"transaction_id\": \"cf01b6c3-74c9-4e69-a779-9742571abff6\",\r\n  \"order\": {\r\n    \"subtotal\": 90.0,\r\n    \"tax\": 10.2,\r\n    \"total\": 100.2,\r\n    \"currency\": \"usd\",\r\n    \"items\": [\r\n      {\r\n        \"id\": \"344187961\",\r\n        \"quantity\": 1,\r\n        \"price\": 20.0\r\n      },\r\n      {\r\n        \"id\": \"344187960\",\r\n        \"quantity\": 2.2,\r\n        \"price\": 0.91\r\n      },\r\n      {\r\n        \"id\": \"344187965\",\r\n        \"quantity\": 5,\r\n        \"price\": 10.0\r\n      }\r\n    ],\r\n    \"payments\": [\r\n      {\r\n        \"type\": \"cash\",\r\n        \"amount\": 25.5\r\n      },\r\n      {\r\n        \"type\": \"mile_payment\",\r\n        \"amount\": 50.0,\r\n        \"payment_provision_token\": \"ppt_66feace2-873d-4a8b-9fdc-9eac06b07517\"\r\n      }\r\n    ],\r\n    \"discounts\": [\r\n      {\r\n        \"type\": \"other\",\r\n        \"amount\": 1.5\r\n      },\r\n      {\r\n        \"type\": \"loyalty_discount\",\r\n        \"amount\": 1.0,\r\n        \"discount_provision_token\": \"dpt_91b518d5-be93-4b54-b943-1b3c71cee7c4\"\r\n      }\r\n    ]\r\n  }\r\n}"
            },
            "description": "This endpoint allows to create an order for earn miles. It may also include discounts and payments."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\",\r\n  \"result\": {\r\n    \"transaction_token\": \"ot_71f06a17-3021-4c42-bd38-e492a7579f65\"\r\n  }\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "b61ef010-6a27-4e42-b7df-4131a7a67b33"
            }
          ]
        },
        {
          "id": "4630e4df-f3de-4481-b892-b5c602a01b99",
          "name": "Cart Info",
          "request": {
            "url": "http://default/v2/ecommerce/carts",
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"user_token\": \"ut_b69c3393-54eb-471c-907d-8d4ed405f88e\",\r\n  \"cart\": {\r\n    \"subtotal\": 90.0,\r\n    \"tax\": 10.2,\r\n    \"total\": 100.2,\r\n    \"currency\": \"usd\",\r\n    \"items\": [\r\n      {\r\n        \"id\": \"344187961\",\r\n        \"quantity\": 1,\r\n        \"price\": 20.0\r\n      },\r\n      {\r\n        \"id\": \"344187960\",\r\n        \"quantity\": 2.2,\r\n        \"price\": 0.91\r\n      },\r\n      {\r\n        \"id\": \"344187965\",\r\n        \"quantity\": 5,\r\n        \"price\": 10.0\r\n      }\r\n    ]\r\n  }\r\n}"
            },
            "description": "This endpoint allows to get available amount of money, based on miles of user and their discounts which is based on cart or items."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\",\r\n  \"result\": {\r\n    \"available_point\": {\r\n      \"value\": 100.2,\r\n      \"currency\": \"usd\"\r\n    },\r\n    \"cart_discount\": {\r\n      \"discount\": 10.0,\r\n      \"currency\": \"usd\",\r\n      \"discount_provision_token\": \"dpt_91b518d5-be93-4b54-b943-1b3c71cee7c4\"\r\n    }\r\n  }\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "2659e904-cc2e-4922-91da-95b006b8fd5a"
            }
          ]
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "id": "3c80c245-fcbc-4bf1-b5a8-6b1dad4fda6b",
          "name": "Authentication",
          "request": {
            "url": "http://default/oauth/token",
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "It advertises which content type is able to understand.",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "It tells the client what the content type of the returned.",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"client_id\": \"{{client_id}}\",\r\n  \"client_secret\": \"{{client_secret}}\",\r\n  \"grant_type\": \"{{grant_type}}\"\r\n}"
            },
            "description": "An access token will allow you to make requests for the system. We support only one type of token: client_credentials"
          },
          "response": [
            {
              "body": "{\r\n  \"access_token\": \"{{access_token}}\",\r\n  \"token_type\": \"bearer\",\r\n  \"created_at\": \"1496737098\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "e4be8f05-b853-4ded-bb5b-9354e1f105e3"
            }
          ]
        }
      ]
    },
    {
      "name": "Return",
      "item": [
        {
          "id": "c96d18b7-f469-4e21-b42d-397b71c51092",
          "name": "Start Return",
          "request": {
            "url": "http://default/v2/ecommerce/returns",
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"transaction_id\": \"cf01b6c3-74c9-4e69-a779-9742571abff6\",\r\n  \"amount\": {\r\n    \"value\": 10.0,\r\n    \"currency\": \"usd\"\r\n  }\r\n}"
            },
            "description": "This endpoint allows to start a return for a specific order."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\",\r\n  \"result\": {\r\n    \"return_provision_token\": \"rpt_e0563e09-e1b2-4144-a236-30ea76b58058\"\r\n  }\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "5da5a059-2a66-4585-b082-2be9eb98cf1f"
            }
          ]
        },
        {
          "id": "aab5236a-9fbf-42be-a583-f210d5141d4c",
          "name": "Complete Return",
          "request": {
            "url": "http://default/v2/ecommerce/returns",
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"return_provision_token\": \"rpt_e0563e09-e1b2-4144-a236-30ea76b58058\"\r\n}"
            },
            "description": "This endpoint allows to complete a return."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "2d0d2cb4-fd47-4d4a-b683-6fc4951a054a"
            }
          ]
        },
        {
          "id": "8a3c7bd1-aca1-452a-bad2-3f4bd2e18809",
          "name": "Cancel Return",
          "request": {
            "url": "http://default/v2/ecommerce/returns",
            "method": "DELETE",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "disabled": false
              },
              {
                "key": "Content-Type",
                "value": "application/json;charset=utf-8",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"store_code\": \"ECO123858493939\",\r\n  \"return_provision_token\": \"rpt_e0563e09-e1b2-4144-a236-30ea76b58058\"\r\n}"
            },
            "description": "This endpoint allows to cancel a return."
          },
          "response": [
            {
              "body": "{\r\n  \"status\": \"ok\"\r\n}",
              "code": 200,
              "name": "Response_200",
              "id": "c33fae0e-0d40-4a07-85bc-a1cf2b4a46b5"
            }
          ]
        }
      ]
    }
  ],
  "auth": {
    "type": "oauth2",
    "oauth2": {
      "accessTokenUrl": "https://test1.api.globalmiles.com/oauth/token",
      "scope": "",
      "grantType": "client_credentials"
    }
  }
}